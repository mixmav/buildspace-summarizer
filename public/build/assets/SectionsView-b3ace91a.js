import{j as z,u as N,r as O,l as $,c as m,a as t,t as u,b as s,d as y,n as v,i as f,w as h,m as g,f as R,F as B,p as D,o as _,$ as I}from"./app-b004a0ef.js";import{u as L,_ as M}from"./SubscriberSignUp-7c6823e7.js";const A=z("apiResponse",{state:()=>({title:"",sections:[],summaries:[]})}),E={class:"w-full mb-[80px]"},F={class:"mt-12",id:"video-title-heading"},H={clas:"mt-4"},P=t("span",{class:"text-primary"},"#",-1),q={class:"text-primary"},G=t("i",{class:"fa fa-sync"},null,-1),J={class:"daisy-tabs"},K={class:"mt-6"},Q={class:"w-full mt-8"},U=t("h3",{class:"mt-0"},[y("I'm still working on this "),t("i",{class:"fa fa-yin-yang animate-rotate fa-spin"})],-1),W=t("p",{class:"my-0 mb-4"},"Sign up if you'd like feature updates via emails. No spam ðŸ«¡",-1),X={class:"daisy-tabs-boxed mt-6 overflow-x-auto"},Y=["onClick"],Z={class:"p-2"},ss={class:"mt-4 flex flex-col md:flex-row justify-between items-start md:items-center py-2"},ts={class:"my-0"},es=["disabled"],as=t("i",{class:"fa fa-layer-group"},null,-1),is={class:"daisy-badge hidden md:block daisy-badge-sm"},os={key:0},ns=t("h3",{class:"mb-0"},"Summary ðŸ¥¥",-1),ls=["innerHTML"],ds={key:1},rs={__name:"SectionsView",emits:["startOver"],setup(cs,{expose:V,emit:j}){const a=A(),r=L(),S=N();let n=O(0),i=O(1);V({activeSection:n,activeTab:i});let l=$(()=>a.sections[n.value]),c=$(()=>a.summaries.findIndex(d=>d.section_id==l.value.section_id)),x=()=>{I.ajax({url:"/api/summarize/section",method:"POST",data:{section_id:l.value.section_id},beforeSend:()=>{r.loading=!0},success:d=>{var e;((e=d.errors)==null?void 0:e.length)>0?d.errors.forEach(b=>{S.error(b)}):c.value>-1?a[c.value]={section_id:l.value.section_id,text:d}:a.summaries.push({section_id:l.value.section_id,summary:(d+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")})},error:()=>{S.error("Something went wrong ðŸ¥¥")},complete:()=>{setTimeout(()=>{r.loading=!1},800)}})},k=()=>{a.title="",a.sections=[],a.summaries=[],j("startOver")},w=()=>{a.summaries.splice(c.value,1)};return(d,e)=>{var b,T,C;return _(),m("div",E,[t("h2",F,u(s(a).title),1),t("h3",H,[P,y("Â This podcast has "),t("span",q,u(s(a).sections.length)+" sections",1),y(".")]),t("button",{class:"daisy-btn daisy-btn-sm my-4 gap-2",onClick:e[0]||(e[0]=(...o)=>s(k)&&s(k)(...o))},[G,y("Start over")]),t("div",J,[t("span",{class:v(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(i)==0}]),onClick:e[1]||(e[1]=o=>f(i)?i.value=0:i=0)},"Overall summary",2),t("span",{class:v(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(i)==1}]),onClick:e[2]||(e[2]=o=>f(i)?i.value=1:i=1)},"Summary by section",2)]),h(t("div",K,[t("div",Q,[U,W,R(M)])],512),[[g,s(i)==0]]),h(t("div",null,[t("div",X,[(_(!0),m(B,null,D(s(a).sections,(o,p)=>(_(),m("a",{class:v(["daisy-tab inline daisy-tab-lg lifted transition-[background-color,color,border-radius] ease-linear",{"daisy-tab-active":p==s(n)}]),key:p,onClick:ms=>f(n)?n.value=s(r).loading?s(n):p:n=s(r).loading?s(n):p},u(o.section_number+1),11,Y))),128))]),t("div",Z,[t("div",ss,[t("h2",ts,u((b=s(l))==null?void 0:b.title),1),t("button",{class:v(["daisy-btn daisy-btn-primary daisy-btn-sm gap-2 mt-4 md:mt-0",{"daisy-loading":s(r).loading}]),disabled:s(r).loading||s(c)>-1,onClick:e[3]||(e[3]=(...o)=>s(x)&&s(x)(...o))},[as,y("Summarize section")],10,es)]),h(t("div",is,"Often a general introduction",512),[[g,((T=s(l))==null?void 0:T.section_number)==0]]),s(c)>-1?(_(),m("div",os,[ns,t("a",{class:"daisy-link daisy-link-primary text-xs",onClick:e[4]||(e[4]=(...o)=>s(w)&&s(w)(...o))},"View original"),t("p",{class:"my-0 mt-4",innerHTML:s(a).summaries[s(c)].summary},null,8,ls)])):(_(),m("p",ds,u((C=s(l))==null?void 0:C.text),1))])],512),[[g,s(i)==1]])])}}},ys=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));export{ys as S,rs as _,A as u};
