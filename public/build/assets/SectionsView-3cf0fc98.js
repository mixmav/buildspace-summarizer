import{k as R,u as B,r as S,m as D,p as $,c as r,a as e,t as p,b as s,d as b,n as y,i as v,w as g,q as k,f as I,s as q,F as z,h as N,x as A,o as c,$ as E}from"./app-efba75a1.js";import{u as F,_ as H}from"./SubscriberSignUp-34d81515.js";const P=R("apiResponse",{state:()=>({title:"",sections:[],summaries:[]})}),U={class:"w-full mb-[80px]"},G={class:"mt-12",id:"video-title-heading"},J={clas:"mt-4"},K=e("span",{class:"text-primary"},"#",-1),Q={class:"text-primary"},W=e("i",{class:"fa fa-sync"},null,-1),X={class:"daisy-tabs"},Y={class:"mt-6"},Z={class:"w-full mt-8"},ss=e("h3",{class:"mt-0"},[b("Still working on this "),e("i",{class:"fa fa-yin-yang animate-rotate fa-spin"})],-1),es=e("p",{class:"my-0 mb-4"},"Sign up if you'd like feature updates via emails. No spam 🫡",-1),ts={class:"daisy-collapse relative"},as=e("i",{class:"fa fa-caret-down absolute z-20 right-10 top-10 peer-checked:-rotate-180 transition-transform duration-300"},null,-1),is=e("div",{class:"daisy-collapse-title bg-base-300 rounded-xl mt-4"},[e("h4",{class:"my-0"},[e("i",{class:"fa fa-clipboard-list mr-4"}),b("List view")])],-1),os={class:"daisy-collapse-content peer-checked:p-4"},ns=["onClick"],ls={class:"daisy-tabs-boxed mt-6 overflow-x-auto",id:"sections-tabs"},ds=["onClick"],rs={class:"p-2"},cs={class:"mt-4 flex flex-col md:flex-row justify-between items-start md:items-center py-2"},ms={class:"my-0"},us=["disabled"],_s=e("i",{class:"fa fa-layer-group"},null,-1),ps={class:"daisy-badge hidden md:block daisy-badge-sm"},bs={key:0,class:"italic"},ys={key:1},vs=e("h4",{class:"mb-0"},"Summary 🥥",-1),hs=["innerHTML"],fs={key:2},gs={__name:"SectionsView",emits:["startOver"],setup(Ss,{expose:j,emit:L}){const o=P(),d=F(),x=B();let a=S(0),n=S(1),h=S(!0);j({activeSection:a,activeTab:n}),D(a,()=>{setTimeout(()=>{document.querySelector("#sections-tabs .daisy-tab-active").scrollIntoView({behavior:"smooth",block:"center"})},300)});let m=$(()=>o.sections[a.value]),u=$(()=>o.summaries.findIndex(_=>_.section_id==m.value.section_id)),w=()=>{E.ajax({url:"/api/summarize/section",method:"POST",data:{section_id:m.value.section_id},beforeSend:()=>{d.loading=!0},success:_=>{var i;((i=_.errors)==null?void 0:i.length)>0?_.errors.forEach(f=>{x.error(f)}):u.value>-1?o[u.value]={section_id:m.value.section_id,text:_}:o.summaries.push({section_id:m.value.section_id,summary:(_+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")})},error:()=>{x.error("Something went wrong 🥥")},complete:()=>{setTimeout(()=>{d.loading=!1},800)}})},C=()=>{o.title="",o.sections=[],o.summaries=[],L("startOver")},O=()=>{o.summaries.splice(u.value,1)};return(_,i)=>{var f,T,V;return c(),r("div",U,[e("h2",G,p(s(o).title),1),e("h3",J,[K,b(" This podcast has "),e("span",Q,p(s(o).sections.length)+" sections",1),b(".")]),e("button",{class:"daisy-btn daisy-btn-sm my-4 gap-2",onClick:i[0]||(i[0]=(...t)=>s(C)&&s(C)(...t))},[W,b("Start over")]),e("div",X,[e("span",{class:y(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(n)==0}]),onClick:i[1]||(i[1]=t=>v(n)?n.value=0:n=0)},"Overall summary",2),e("span",{class:y(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(n)==1}]),onClick:i[2]||(i[2]=t=>v(n)?n.value=1:n=1)},"Sections",2)]),g(e("div",Y,[e("div",Z,[ss,es,I(H)])],512),[[k,s(n)==0]]),g(e("div",null,[e("div",ts,[g(e("input",{type:"checkbox",class:"peer","onUpdate:modelValue":i[3]||(i[3]=t=>v(h)?h.value=t:h=t)},null,512),[[q,s(h)]]),as,is,e("div",os,[(c(!0),r(z,null,N(s(o).sections,(t,l)=>(c(),r("div",{onClick:M=>v(a)?a.value=s(d).loading?s(a):l:a=s(d).loading?s(a):l,class:y([{"!daisy-badge-accent animate-bounce cursor-default":l==s(a)},"daisy-badge daisy-badge-primary odd:daisy-badge-secondary ml-2 cursor-pointer"]),key:l},p(t.title.length>30?t.title.slice(0,50)+"...":t.title),11,ns))),128))])]),e("div",ls,[(c(!0),r(z,null,N(s(o).sections,(t,l)=>(c(),r("a",{class:y(["daisy-tab inline daisy-tab-lg lifted transition-[background-color,color,border-radius] ease-linear",{"daisy-tab-active":l==s(a)}]),key:l,onClick:M=>v(a)?a.value=s(d).loading?s(a):l:a=s(d).loading?s(a):l},p(t.section_number+1),11,ds))),128))]),e("div",rs,[e("div",cs,[e("h2",ms,p((f=s(m))==null?void 0:f.title),1),e("button",{class:y(["daisy-btn daisy-btn-primary daisy-btn-sm gap-2 mt-4 md:mt-0",{"daisy-loading":s(d).loading}]),disabled:s(d).loading||s(u)>-1,onClick:i[4]||(i[4]=(...t)=>s(w)&&s(w)(...t))},[_s,b("Summarize section")],10,us)]),g(e("div",ps," Often a general introduction",512),[[k,((T=s(m))==null?void 0:T.section_number)==0]]),s(u)==-1?(c(),r("h4",bs,"Original transcript 🍇")):A("",!0),s(u)>-1?(c(),r("div",ys,[vs,e("a",{class:"daisy-link daisy-link-primary text-xs",onClick:i[5]||(i[5]=(...t)=>s(O)&&s(O)(...t))},"View original"),e("p",{class:"my-0 mt-4",innerHTML:s(o).summaries[s(u)].summary},null,8,hs)])):(c(),r("p",fs,p((V=s(m))==null?void 0:V.text),1))])],512),[[k,s(n)==1]])])}}},ws=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));export{ws as S,gs as _,P as u};
