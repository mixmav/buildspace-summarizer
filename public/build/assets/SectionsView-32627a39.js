import{k as R,u as B,r as S,m as D,p as $,c as m,a as e,t as b,b as s,d as y,n as p,i as v,w as g,q as k,f as I,s as q,F as z,h as j,o as u,$ as A}from"./app-38ec8693.js";import{u as E,_ as F}from"./SubscriberSignUp-e9723cfd.js";const H=R("apiResponse",{state:()=>({title:"",sections:[],summaries:[]})}),P={class:"w-full mb-[80px]"},U={class:"mt-12",id:"video-title-heading"},G={clas:"mt-4"},J=e("span",{class:"text-primary"},"#",-1),K={class:"text-primary"},Q=e("i",{class:"fa fa-sync"},null,-1),W={class:"daisy-tabs"},X={class:"mt-6"},Y={class:"w-full mt-8"},Z=e("h3",{class:"mt-0"},[y("Still working on this "),e("i",{class:"fa fa-yin-yang animate-rotate fa-spin"})],-1),ss=e("p",{class:"my-0 mb-4"},"Sign up if you'd like feature updates via emails. No spam ðŸ«¡",-1),es={class:"daisy-collapse relative"},ts=e("i",{class:"fa fa-caret-down absolute z-20 right-10 top-10 peer-checked:-rotate-180 transition-transform duration-300"},null,-1),as=e("div",{class:"daisy-collapse-title bg-base-300 rounded-xl mt-4"},[e("h4",{class:"my-0"},[e("i",{class:"fa fa-clipboard-list mr-4"}),y("List view")])],-1),is={class:"daisy-collapse-content peer-checked:p-4"},os=["onClick"],ns={class:"daisy-tabs-boxed mt-6 overflow-x-auto",id:"sections-tabs"},ls=["onClick"],ds={class:"p-2"},rs={class:"mt-4 flex flex-col md:flex-row justify-between items-start md:items-center py-2"},cs={class:"my-0"},ms=["disabled"],us=e("i",{class:"fa fa-layer-group"},null,-1),_s={class:"daisy-badge hidden md:block daisy-badge-sm"},bs={key:0},ys=e("h3",{class:"mb-0"},"Summary ðŸ¥¥",-1),ps=["innerHTML"],vs={key:1},hs={__name:"SectionsView",emits:["startOver"],setup(fs,{expose:L,emit:M}){const o=H(),d=E(),x=B();let a=S(0),n=S(1),h=S(!0);L({activeSection:a,activeTab:n}),D(a,()=>{setTimeout(()=>{document.querySelector("#sections-tabs .daisy-tab-active").scrollIntoView({behavior:"smooth",block:"center"})},300)});let r=$(()=>o.sections[a.value]),_=$(()=>o.summaries.findIndex(c=>c.section_id==r.value.section_id)),w=()=>{A.ajax({url:"/api/summarize/section",method:"POST",data:{section_id:r.value.section_id},beforeSend:()=>{d.loading=!0},success:c=>{var i;((i=c.errors)==null?void 0:i.length)>0?c.errors.forEach(f=>{x.error(f)}):_.value>-1?o[_.value]={section_id:r.value.section_id,text:c}:o.summaries.push({section_id:r.value.section_id,summary:(c+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")})},error:()=>{x.error("Something went wrong ðŸ¥¥")},complete:()=>{setTimeout(()=>{d.loading=!1},800)}})},C=()=>{o.title="",o.sections=[],o.summaries=[],M("startOver")},T=()=>{o.summaries.splice(_.value,1)};return(c,i)=>{var f,O,V;return u(),m("div",P,[e("h2",U,b(s(o).title),1),e("h3",G,[J,y("Â This podcast has "),e("span",K,b(s(o).sections.length)+" sections",1),y(".")]),e("button",{class:"daisy-btn daisy-btn-sm my-4 gap-2",onClick:i[0]||(i[0]=(...t)=>s(C)&&s(C)(...t))},[Q,y("Start over")]),e("div",W,[e("span",{class:p(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(n)==0}]),onClick:i[1]||(i[1]=t=>v(n)?n.value=0:n=0)},"Overall summary",2),e("span",{class:p(["daisy-tab daisy-tab-bordered daisy-tab-md md:daisy-tab-lg",{"daisy-tab-active":s(n)==1}]),onClick:i[2]||(i[2]=t=>v(n)?n.value=1:n=1)},"Summary by section",2)]),g(e("div",X,[e("div",Y,[Z,ss,I(F)])],512),[[k,s(n)==0]]),g(e("div",null,[e("div",es,[g(e("input",{type:"checkbox",class:"peer","onUpdate:modelValue":i[3]||(i[3]=t=>v(h)?h.value=t:h=t)},null,512),[[q,s(h)]]),ts,as,e("div",is,[(u(!0),m(z,null,j(s(o).sections,(t,l)=>(u(),m("div",{onClick:N=>v(a)?a.value=s(d).loading?s(a):l:a=s(d).loading?s(a):l,class:p([{"!daisy-badge-accent animate-bounce cursor-default":l==s(a)},"daisy-badge daisy-badge-primary odd:daisy-badge-secondary ml-2 cursor-pointer"]),key:l},b(t.title.length>30?t.title.slice(0,50)+"...":t.title),11,os))),128))])]),e("div",ns,[(u(!0),m(z,null,j(s(o).sections,(t,l)=>(u(),m("a",{class:p(["daisy-tab inline daisy-tab-lg lifted transition-[background-color,color,border-radius] ease-linear",{"daisy-tab-active":l==s(a)}]),key:l,onClick:N=>v(a)?a.value=s(d).loading?s(a):l:a=s(d).loading?s(a):l},b(t.section_number+1),11,ls))),128))]),e("div",ds,[e("div",rs,[e("h2",cs,b((f=s(r))==null?void 0:f.title),1),e("button",{class:p(["daisy-btn daisy-btn-primary daisy-btn-sm gap-2 mt-4 md:mt-0",{"daisy-loading":s(d).loading}]),disabled:s(d).loading||s(_)>-1,onClick:i[4]||(i[4]=(...t)=>s(w)&&s(w)(...t))},[us,y("Summarize section")],10,ms)]),g(e("div",_s," Often a general introduction",512),[[k,((O=s(r))==null?void 0:O.section_number)==0]]),s(_)>-1?(u(),m("div",bs,[ys,e("a",{class:"daisy-link daisy-link-primary text-xs",onClick:i[5]||(i[5]=(...t)=>s(T)&&s(T)(...t))},"View original"),e("p",{class:"my-0 mt-4",innerHTML:s(o).summaries[s(_)].summary},null,8,ps)])):(u(),m("p",vs,b((V=s(r))==null?void 0:V.text),1))])],512),[[k,s(n)==1]])])}}},ks=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));export{ks as S,hs as _,H as u};
