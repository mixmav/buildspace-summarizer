import{j as z,u as N,r as O,l as $,c as u,a as t,t as _,b as s,d as m,n as v,i as f,w as g,m as h,f as R,F as B,p as D,o as y,$ as I}from"./app-f4b6dc54.js";import{u as L,_ as M}from"./SubscriberSignUp-dd946bb9.js";const A=z("apiResponse",{state:()=>({title:"",sections:[],summaries:[]})}),E={class:"w-full mb-[80px]"},F={class:"mt-12",id:"video-title-heading"},H={clas:"mt-4"},P=t("span",{class:"text-primary"},"#",-1),q={class:"text-primary"},G=t("i",{class:"fa fa-sync"},null,-1),J={class:"daisy-tabs"},K={class:"mt-6"},Q={class:"w-full mt-8"},U=t("h3",{class:"mt-0"},[m("I'm still working on this "),t("i",{class:"fa fa-yin-yang animate-rotate fa-spin"})],-1),W=t("p",{class:"my-0 mb-4"},"Sign up if you'd like feature updates via emails. No spam ðŸ«¡",-1),X={class:"daisy-tabs-boxed mt-6"},Y=["onClick"],Z={class:"p-2"},ss={class:"mt-4 flex justify-between items-center py-2"},ts={class:"my-0"},es=["disabled"],as=t("i",{class:"fa fa-layer-group"},null,-1),is={class:"daisy-badge daisy-badge-sm"},os={key:0},ns=t("br",null,null,-1),ls=["innerHTML"],rs={key:1},ds={__name:"SectionsView",emits:["startOver"],setup(cs,{expose:V,emit:j}){const a=A(),d=L(),S=N();let n=O(0),i=O(1);V({activeSection:n,activeTab:i});let l=$(()=>a.sections[n.value]),c=$(()=>a.summaries.findIndex(r=>r.section_id==l.value.section_id)),x=()=>{I.ajax({url:"/api/summarize/section",method:"POST",data:{section_id:l.value.section_id},beforeSend:()=>{d.loading=!0},success:r=>{var e;((e=r.errors)==null?void 0:e.length)>0?r.errors.forEach(p=>{S.error(p)}):c.value>-1?a[c.value]={section_id:l.value.section_id,text:r}:a.summaries.push({section_id:l.value.section_id,summary:(r+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2")})},error:()=>{S.error("Something went wrong ðŸ¥¥")},complete:()=>{setTimeout(()=>{d.loading=!1},800)}})},k=()=>{a.title="",a.sections=[],a.summaries=[],j("startOver")},w=()=>{a.summaries.splice(c.value,1)};return(r,e)=>{var p,T,C;return y(),u("div",E,[t("h2",F,_(s(a).title),1),t("h3",H,[P,m("Â This podcast contains "),t("span",q,_(s(a).sections.length)+" sections",1),m(".")]),t("button",{class:"daisy-btn daisy-btn-sm my-4 gap-2",onClick:e[0]||(e[0]=(...o)=>s(k)&&s(k)(...o))},[G,m("Start over")]),t("div",J,[t("span",{class:v(["daisy-tab daisy-tab-bordered daisy-tab-lg",{"daisy-tab-active":s(i)==0}]),onClick:e[1]||(e[1]=o=>f(i)?i.value=0:i=0)},"Overall summary",2),t("span",{class:v(["daisy-tab daisy-tab-bordered daisy-tab-lg",{"daisy-tab-active":s(i)==1}]),onClick:e[2]||(e[2]=o=>f(i)?i.value=1:i=1)},"Summary by section",2)]),g(t("div",K,[t("div",Q,[U,W,R(M)])],512),[[h,s(i)==0]]),g(t("div",null,[t("div",X,[(y(!0),u(B,null,D(s(a).sections,(o,b)=>(y(),u("a",{class:v(["daisy-tab daisy-tab-lg lifted transition-[background-color,color,border-radius] ease-linear",{"daisy-tab-active":b==s(n)}]),key:b,onClick:ms=>f(n)?n.value=s(d).loading?s(n):b:n=s(d).loading?s(n):b},_(o.section_number+1),11,Y))),128))]),t("div",Z,[t("div",ss,[t("h2",ts,_((p=s(l))==null?void 0:p.title),1),t("button",{class:v(["daisy-btn daisy-btn-primary daisy-btn-sm gap-2",{"daisy-loading":s(d).loading}]),disabled:s(d).loading||s(c)>-1,onClick:e[3]||(e[3]=(...o)=>s(x)&&s(x)(...o))},[as,m("Summarize this section")],10,es)]),g(t("div",is,"Often a general introduction",512),[[h,((T=s(l))==null?void 0:T.section_number)==0]]),s(c)>-1?(y(),u("div",os,[t("h3",null,[m("Summary ðŸ¤–"),ns,t("a",{class:"daisy-link daisy-link-primary text-xs",onClick:e[4]||(e[4]=(...o)=>s(w)&&s(w)(...o))},"View original")]),t("p",{class:"my-0",innerHTML:s(a).summaries[s(c)].summary},null,8,ls)])):(y(),u("p",rs,_((C=s(l))==null?void 0:C.text),1))])],512),[[h,s(i)==1]])])}}},ys=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"}));export{ys as S,ds as _,A as u};
